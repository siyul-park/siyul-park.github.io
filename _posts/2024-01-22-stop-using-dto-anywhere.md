---
layout: single
title: "모든 곳에 DTO를 쓰지는 마세요"
date: 2024-01-22 00:00:00 +0900
categories: pattern
---

DTO(Data Transfer Object)는 서로 다른 프로세스 간에 데이터를 전송할 때 사용되는 객체로, 여러 호출에서 전달되는 데이터를 효율적으로 통합하여 프로세스 간 통신 비용을 최소화합니다. 데이터 전달을 목적으로 하며, 비즈니스 로직을 포함하지 않지만 필요에 따라 직렬화와 역직렬화 매커니즘이 추가될 수 있습니다.

DTO는 프로세스 간 통신 외에도 여러 모듈과 계층 간에 데이터를 전달하는 객체로 확장되었습니다. 이는 계층과 모듈을 넘어 복잡한 연산을 효과적으로 묶어 더 편리한 인터페이스를 제공하는 파사드에서 활용됩니다.

그러나 이런 확장이 지나치게 이루어져 오용되는 경우가 있습니다. 경계에서 전달되는 객체에서 비즈니스 로직이 제거되어 데이터만 이동하게 되었고, 행위들이 자연스럽게 경계면의 인터페이스에 응집되어 자잘한 행위자나 거대한 절차지향적인 클래스로 형성되었습니다. 이러한 행위자는 주로 수신자에게 만들어지는 경향이 있어 호출자의 도메인이 사용자에게 역류하여 어중간한 객체를 만들어내기도 합니다.

중요한 도메인 지식은 경계를 넘어서지 못하고 경계 내에서만 소비되며, 행위자들 내에서 정제되지 않은 절차로만 존재하게 되었습니다. 결국 전송 계층이 전체 도메인을 삼켜버리게 되었습니다.

계층 간 통신에서는 종종 비지니스 로직을 포함하지 않고 VO와 일부 혼용되어 변경 불가능하게 설계된 DTO가 필요하지 않을 수 있습니다. 외부에 일부 인터페이스만 노출하여 시스템 결합도를 낮추고 인지 과부화를 방지하며 재사용성을 높이는 것은 필요하지만, DTO가 항상 필요한 것은 아닙니다.

경계를 넘어 전송되는 객체는 비지니스 로직을 포함할 수 있으며 핵심 도메인 객체일 수도 있습니다. 정제된 도메인 객체는 도메인 지식을 효과적으로 표현하며 사용하기에 충분히 편리한 인터페이스를 제공합니다. 경계 내에서만 사용되는 지식은 모듈과 접근 제어자로 충분히 표현할 수 있으며, 외부에 전혀 다른 객체를 노출해야 할 경우 행위와 데이터를 분리시키는 대신 충분히 정제된 연산을 가진 객체를 경계에 위치시킬 수 있습니다.

효율적인 데이터 전달을 위해 DTO를 사용하더라도, DTO는 추상화하는 모듈에 정의되는 것이 아니라 사용하는 모듈에 위치해야 합니다. 외부 모듈은 그 도메인에 맞게 설계되어야 합니다. 외부의 도메인을 변역하는 것은 외부 모듈을 이용하는 도메인의 책임입니다.

DTO의 원래 용도에 맞게 다른 프로세스 간에 데이터를 전송할 때 사용하세요. 표현 계층에서 노출할 데이터를 정의하는 모델로 활용하여 불필요한 정보를 방지하고 동시에 전송되어야 하는 데이터를 효과적으로 묶어 전송 효율성을 높일 수 있습니다. 더불어, 도메인 객체에서 표현과 전송에 대한 책임을 분리하여 더 이해하기 쉽고 유연한 구조를 만들어 줍니다.